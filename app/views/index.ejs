<!DOCTYPE html>
<html lang="en">

<!-- COMMENT: this defines the metadata of the app -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- COMMENT: this sets the title of the app, which appears on the chrome tab -->
    <title>Todo app</title>
    <!-- COMMENT: this specifies the css script to include -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <!-- COMMENT: this specifies the styles of the page -->
    <style>
        .hov:hover {
            background-color: rgb(201, 193, 209);
        }

        .basicstyle {
            cursor: pointer;
        }

        .logo {
            border-radius: 64px;
            height: 38px;
        }
        .libasic {
            display: flex;
            justify-content: space-between;
            font-family: sans-serif;
            font-size:1.2rem;
        }
        
    </style>
</head>

<body>

    <!-- As a link -->
    <!-- COMMENT: this header contains a title and a profile picture, title, and logout button -->
    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
            <!-- COMMENT: this renders the user's google image and a title based on the user's name -->
            <a class="navbar-brand" href="/"><img class="logo" src=<%=userinfo.image %> alt=""> &nbsp; <%=
                    userinfo.firstName %>'s To-do</a>
            <!-- COMMENT: this creates a logout button -->
            <a class="navbar-brand btn btn-danger btn-small" style="color: white;" href="/auth/logout">Logout</a>
        </div>
    </nav>


    <div class="container mt-5 ">
        <!-- COMMENT: this creates a form for inputting todos -->
        <form action="/add/todo" class="d-flex" method="POST">
            <!-- COMMENT: this creates an input field -->
            <input type="text" name="todo" class="form-control" placeholder="Enter Todo">
            <!-- COMMENT: this creates a submit button -->
            <input type="submit" value="Add" class="btn btn-md btn-primary mx-3">
        </form>

        <!-- COMMENT: this creates an unordered list section for rendering todos -->
        <ul class="list-group mt-5 ">
            <!-- COMMENT: this loops through todos and renders background and buttons conditionally -->
            <% todo.forEach(todos=>{ %>

                <li class="list-group-item hov libasic" 
                
                <% if(todos.done==1) 
                { %>style=" background-color: #accec6 ; text-decoration: line-through;"
                <% } %> >
                    <%= todos.todo %>

                    <span>

                        <% if(todos.done==0) 
                        { %> <a href="/update/todo/<%=todos._id%>" class="btn btn-success btn-small" style="margin-right:0px">Done</a>
                        <% } %>
                        
                        <a href="/delete/todo/<%=todos._id%>" class="btn btn-danger btn-small">Delete</a>
                    </span>
                </li>

                <% }) %>
        </ul>

    </div>

    <!-- COMMENT: this specifies the javascript scripts to include -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>
    <script src="ejs.min.js"></script>
</body>

</html>